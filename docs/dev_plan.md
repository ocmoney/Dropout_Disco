**Project Plan: "Dropout Disco" Week 1** ğŸ•ºğŸ’ƒâœ¨
---

**Overall Goal:** Predict HN upvotes using title embeddings from a custom word2vec model, deployed as a Dockerized FastAPI service. ğŸ³

**Phase 1: Custom Word Embedding Generation (word2vec)** ğŸ§ 

*   **Goal:** Train word embeddings on `text8` and save the resulting vectors.
*   **Environment:** Local machine ğŸ’» (MPS Accelerated)

| Step | Task                                             | Description & Details                                                                                                                                                                                                 | Potential Focus       | Status         | Notes                                                                                                                                                                                                                               |
| :--- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------- | :------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1.1  | **Setup & Data Acquisition** âš™ï¸                 | Python env ok âœ…. Libs installed âœ…. `text8` loaded âœ…. Project structure with `utils`, `src` set up âœ…. **MPS verified** âœ…. **W&B setup** âœ….                                                                        | Team (All) ğŸ¤          | âœ… **Complete** | Environment is ready, data loaded, basic structure in place.                                                                                                                                                                        |
| 1.2  | **Text Preprocessing & Vocabulary** ğŸ§¹           | `src/word2vec/vocabulary.py` created âœ…. Handles tokenization (via list input), vocab building (`min_freq`, `<UNK>`) âœ…. Saves/Loads vocab (`.json`) âœ….                                                               | Yurii / Ollie ğŸ§‘â€ğŸ’»       | âœ… **Complete** | Vocabulary class implemented and tested.                                                                                                                                                                                          |
| 1.3  | **Model Choice & Training Data Gen** ğŸ¤”          | **CBOW chosen** âœ…. `src/word2vec/dataset.py` implemented: generates `(context, target)` pairs âœ…, creates PyTorch `Dataset` âœ….                                                                                       | James / Emil ğŸ§‘â€ğŸ’»      | âœ… **Complete** | Data preparation pipeline for CBOW is ready.                                                                                                                                                                                      |
| 1.4  | **Word2Vec Model Implementation (PyTorch)** ğŸ—ï¸    | `src/word2vec/model.py` defines `CBOW` class using `nn.Embedding` & `nn.Linear` âœ…. Forward pass implements averaging logic âœ….                                                                                     | Yurii / James ğŸ§‘â€ğŸ’»      | âœ… **Complete** | Core model architecture implemented.                                                                                                                                                                                                |
| 1.5  | **Loss Function & Negative Sampling** ğŸ“‰          | **Currently using `nn.CrossEntropyLoss`** (Full Softmax) âœ…. Negative Sampling **not yet implemented**.                                                                                                              | Ollie / Emil ğŸ§‘â€ğŸ’»      | âš ï¸ **Partial**  | Basic loss works, but optimized Negative Sampling is a potential future improvement if needed for speed/scalability (though current performance seems good).                                                                          |
| 1.6  | **Training Loop** ğŸ”„                             | `src/word2vec/trainer.py` implements `train_epoch` & `train_model` âœ…. Handles device (MPS) âœ…, optimizer, loss, backprop, epochs âœ…. **Integrated W&B logging** âœ…. `train_word2vec.py` script orchestrates âœ….        | Team (Pair) ğŸ§‘â€ğŸ¤â€ğŸ§‘    | âœ… **Complete** | Core training logic is functional and includes experiment tracking.                                                                                                                                                            |
| 1.7  | **Save Embeddings & Vocab** ğŸ’¾                   | Vocab saved (`.json`) âœ…. Model state (`.pth`, includes embeddings) saved âœ…. **Implemented run-specific directories based on hyperparameters** âœ…. Artifacts logged to W&B âœ….                                        | James / Yurii ğŸ§‘â€ğŸ’»      | âœ… **Complete** | Artifacts are saved locally in an organized way and backed up/tracked on W&B.                                                                                                                                                     |
| 1.8  | **(Optional) Embedding Evaluation** âœ…           | Evaluation notebook (`03_evaluate_word2vec.ipynb`) created âœ…. Loads artifacts âœ…. Implements nearest neighbors & analogy functions âœ…. **Initial results show promising semantic learning** (esp. analogies like Paris-Berlin) âœ…. | Emil / Ollie ğŸ§‘â€ğŸ’»      | âœ… **Complete** | Basic intrinsic evaluation confirms embeddings learned meaningful relationships. Deeper evaluation (e.g., standard datasets) could be done but might not be necessary for this project's main goal.                                |
| 1.9  | **Configuration Management** âš™ï¸ğŸ“„                | `config.yaml` created âœ…. `train_word2vec.py` loads config and uses `argparse` for overrides âœ….                                                                                                                   | Team (All) ğŸ¤          | âœ… **Complete** | Project configuration is centralized and flexible.                                                                                                                                                                                 |


**Phase 2: Regression Model Training** ğŸ“ˆ


*   **Goal:** Train a model to predict `score_log1p` using custom embeddings & save it.
*   **Environment:** Local machine ğŸ’».

| Step | Task                                   | Description & Details                                                                                                                                                                                                      | Potential Focus | Status |
| :--- | :------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------- | :----- |
| 2.1  | **Prepare HN Data & Load Embeddings** ğŸ“Š | Load cleaned HN dataset (`df_..._cleaned`). Load custom word embeddings & vocab saved in 1.7. ğŸ“‚â¡ï¸ğŸ§                                                                                                                     | Ollie / Emil ğŸ§‘â€ğŸ’»  | â˜      |
| 2.2  | **Feature Engineering: Title Vectors** ğŸ› ï¸ | Tokenize HN titles (using **same** vocab!). Average loaded embeddings for tokens (handle UNKs). Result: 1 vector per title. *Consider adding EDA features later.* â•â“                                                  | James / Yurii ğŸ§‘â€ğŸ’»  | â˜      |
| 2.3  | **Data Splitting** ğŸ”ª                   | Split data (features + `score_log1p` target) into Train/Test sets (80/20). Convert to Tensors. ğŸš†ğŸ§ª                                                                                                                  | Emil / Ollie ğŸ§‘â€ğŸ’»  | â˜      |
| 2.4  | **Regression Model Implementation** ğŸ—ï¸  | Define simple PyTorch `nn.Module` for regression (e.g., `nn.Linear`). Input=vector dim, Output=1.                                                                                                                       | Yurii / James ğŸ§‘â€ğŸ’»  | â˜      |
| 2.5  | **Regression Training Loop** ğŸ”„         | Implement training loop: DataLoader BATCH , `nn.MSELoss` ğŸ“‰, Optimizer âš™ï¸, train/eval steps. Predict `score_log1p`. Monitor loss ğŸ‘€.                                                                                     | Ollie / Emil ğŸ§‘â€ğŸ’»  | â˜      |
| 2.6  | **Evaluation** ğŸ’¯                      | Evaluate on Test set. Metrics: MSE, MAE, RMSE (on log & original score scales via `np.expm1`). ğŸ“                                                                                                                        | Team (All) ğŸ¤   | â˜      |
| 2.7  | **Save Regression Model** ğŸ’¾           | **Crucial:** Save trained regression model `state_dict` (`.pt`). Place in `models/`. Version it (e.g., "0.1.0"). ğŸ·ï¸                                                                                                    | James / Yurii ğŸ§‘â€ğŸ’»  | â˜      |

**Phase 3: API Implementation & Dockerization** ğŸ³ğŸš€

*   **Goal:** Create FastAPI service, integrate models, package with Docker.
*   **Environment:** Local machine ğŸ’» for dev/test, Docker runtime.

| Step | Task                                        | Description & Details                                                                                                                                                                                                                                                                        | Potential Focus | Status      |
| :--- | :------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------- | :---------- |
| 3.1  | **Project Structure Setup** ğŸ“              | Create structure: `app/main.py`, `Dockerfile`, `requirements.txt`, `models/` (put saved models here).                                                                                                                                                                                         | Team (All) ğŸ¤    | â˜           |
| 3.2  | **`requirements.txt`** ğŸ“„                   | List packages: `fastapi`, `uvicorn[standard]`, `torch`, `numpy`, `pandas`, etc. Dependency management!                                                                                                                                                                                   | Ollie / Emil ğŸ§‘â€ğŸ’» | â˜           |
| 3.3  | **FastAPI Basics (`main.py`)** âœ¨            | Basic app setup. Define `/ping` âœ…, `/version` ğŸ·ï¸. Set `model_version` variable.                                                                                                                                                                                                            | James / Yurii ğŸ§‘â€ğŸ’» | â˜           |
| 3.4  | **Logging Implementation (`main.py`)** âœï¸    | Implement `log_request` (write JSON/str to `log_path`), `read_logs`. Use `/var/log/app`. Implement `/logs` endpoint. Persist logs! ğŸ’¾                                                                                                                                                        | Emil / Ollie ğŸ§‘â€ğŸ’» | â˜           |
| 3.5  | **Prediction Logic (`main.py`)** ğŸ”®         | Helper functions: <br> 1. Load embeddings & vocab ğŸ§ . <br> 2. Load regression model `state_dict` âš™ï¸. <br> 3. Implement `predict_upvotes`: tokenize, avg embeddings, feed to model, return prediction (+ `np.expm1`?).                                                                         | James / Yurii ğŸ§‘â€ğŸ’» | â˜           |
| 3.6  | **`/how_many_upvotes` Endpoint (`main.py`)** ğŸ“® | Implement POST endpoint: parse input, call `predict_upvotes`, calc latency â±ï¸, format log msg ğŸ“, call `log_request`, return prediction JSON.                                                                                                                                           | Ollie / Emil ğŸ§‘â€ğŸ’» | â˜           |
| 3.7  | **`Dockerfile`** ğŸ³                       | Create/Adapt Dockerfile: `python:3.11`, `WORKDIR`, `COPY` requirements/app/models, `RUN pip install`, `EXPOSE 8000`, `CMD`. ğŸ“¦                                                                                                                                                               | James / Yurii ğŸ§‘â€ğŸ’» | â˜           |
| 3.8  | **Local Testing (uvicorn)** ğŸ§ª              | Run `uvicorn app.main:app --reload`. Test endpoints (`curl`, `/docs`). Check predictions work. ğŸğŸ”«                                                                                                                                                                                        | Team (All) ğŸ¤    | â˜           |
| 3.9  | **Docker Build & Run** ğŸ—ï¸â¡ï¸ğŸƒ              | Build: `docker build -t user/repo:version .` <br> Run: `docker run --name dropout-disco -d -p 8000:8000 -v ./logs:/var/log/app user/repo:version`                                                                                                                                          | Team (All) ğŸ¤    | â˜           |
| 3.10 | **Docker Testing & Logging** âœ…ğŸ”           | Test endpoints on container (`localhost:8000`). Verify predictions. Check host `./logs` dir for persistent logs. ğŸ‘€                                                                                                                                                                            | Team (All) ğŸ¤    | â˜           |