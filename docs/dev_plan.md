**Project Plan: "Dropout Disco" Week 1** 🕺💃✨
---

**Overall Goal:** Predict HN upvotes using title embeddings from a custom word2vec model, deployed as a Dockerized FastAPI service. 🐳

**Phase 1: Custom Word Embedding Generation (word2vec)** 🧠

*   **Goal:** Train word embeddings on `text8` and save the resulting vectors.
*   **Environment:** Local machine 💻 (or Colab/cloud VM ☁️ if needed).

| Step | Task                                      | Description & Details                                                                                                                                                                                               | Potential Focus       | Status      |
| :--- | :---------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-------------------- | :---------- |
| 1.1  | **Setup & Data Acquisition** ⚙️          | Ensure local Python env (Conda/venv) ok ✅. Install base libs (`numpy`, `torch`, etc.). Download & load `text8` dataset 💾.                                                                                           | Team (All) 🤝          | ☐           |
| 1.2  | **Text Preprocessing & Vocabulary** 🧹    | Tokenize `text8` ✂️. Build vocab (word->index, index->word) 📖. Decide vocab size, handle UNK. Save vocab mappings (JSON) 📝.                                                                                        | Yurii / Ollie 🧑‍💻       | ☐           |
| 1.3  | **Model Choice & Training Data Gen** 🤔   | Decide: CBOW or Skip-gram? Implement training pair generation `(context, target)` using sliding window across `text8`. ↔️                                                                                         | James / Emil 🧑‍💻      | ☐           |
| 1.4  | **Word2Vec Model Implementation (PyTorch)** 🏗️ | Define PyTorch `nn.Module` (`nn.Embedding` x2). Implement forward pass for chosen model logic. 🧠                                                                                                               | Yurii / James 🧑‍💻      | ☐           |
| 1.5  | **Loss Function & Negative Sampling** 📉   | Implement Negative Sampling Loss (efficient!). Sample negative words per positive example. `F.logsigmoid` useful. 👍👎                                                                                         | Ollie / Emil 🧑‍💻      | ☐           |
| 1.6  | **Training Loop** 🔄                      | Implement PyTorch training loop: DataLoader/Batching  BATCH , Optimizer ⚙️, loop epochs, calc loss, backprop 🔙, update weights 💪. Monitor loss 👀.                                                                 | Team (Pair) 🧑‍🤝‍🧑    | ☐           |
| 1.7  | **Save Embeddings & Vocab** 💾            | **Crucial:** Extract vectors ✨. Save efficiently (`.kv`, `state_dict`) **with vocab map**. Place in `models/` dir. 📂                                                                                              | James / Yurii 🧑‍💻      | ☐           |
| 1.8  | **(Optional) Embedding Evaluation** ✅    | Basic checks: Cosine similarity (find similar words). Simple analogies (king-man+woman ≈ queen 👑). Verify meaningful relationships learned.                                                                       | Emil / Ollie 🧑‍💻      | ☐           |

**Phase 2: Regression Model Training** 📈

*   **Goal:** Train a model to predict `score_log1p` using custom embeddings & save it.
*   **Environment:** Local machine 💻.

| Step | Task                                   | Description & Details                                                                                                                                                                                                      | Potential Focus | Status |
| :--- | :------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------- | :----- |
| 2.1  | **Prepare HN Data & Load Embeddings** 📊 | Load cleaned HN dataset (`df_..._cleaned`). Load custom word embeddings & vocab saved in 1.7. 📂➡️🧠                                                                                                                    | Ollie / Emil 🧑‍💻  | ☐      |
| 2.2  | **Feature Engineering: Title Vectors** 🛠️ | Tokenize HN titles (using **same** vocab!). Average loaded embeddings for tokens (handle UNKs). Result: 1 vector per title. *Consider adding EDA features later.* ➕❓                                                  | James / Yurii 🧑‍💻  | ☐      |
| 2.3  | **Data Splitting** 🔪                   | Split data (features + `score_log1p` target) into Train/Test sets (80/20). Convert to Tensors. 🚆🧪                                                                                                                  | Emil / Ollie 🧑‍💻  | ☐      |
| 2.4  | **Regression Model Implementation** 🏗️  | Define simple PyTorch `nn.Module` for regression (e.g., `nn.Linear`). Input=vector dim, Output=1.                                                                                                                       | Yurii / James 🧑‍💻  | ☐      |
| 2.5  | **Regression Training Loop** 🔄         | Implement training loop: DataLoader BATCH , `nn.MSELoss` 📉, Optimizer ⚙️, train/eval steps. Predict `score_log1p`. Monitor loss 👀.                                                                                     | Ollie / Emil 🧑‍💻  | ☐      |
| 2.6  | **Evaluation** 💯                      | Evaluate on Test set. Metrics: MSE, MAE, RMSE (on log & original score scales via `np.expm1`). 📝                                                                                                                        | Team (All) 🤝   | ☐      |
| 2.7  | **Save Regression Model** 💾           | **Crucial:** Save trained regression model `state_dict` (`.pt`). Place in `models/`. Version it (e.g., "0.1.0"). 🏷️                                                                                                    | James / Yurii 🧑‍💻  | ☐      |

**Phase 3: API Implementation & Dockerization** 🐳🚀

*   **Goal:** Create FastAPI service, integrate models, package with Docker.
*   **Environment:** Local machine 💻 for dev/test, Docker runtime.

| Step | Task                                        | Description & Details                                                                                                                                                                                                                                                                        | Potential Focus | Status      |
| :--- | :------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------- | :---------- |
| 3.1  | **Project Structure Setup** 📁              | Create structure: `app/main.py`, `Dockerfile`, `requirements.txt`, `models/` (put saved models here).                                                                                                                                                                                         | Team (All) 🤝    | ☐           |
| 3.2  | **`requirements.txt`** 📄                   | List packages: `fastapi`, `uvicorn[standard]`, `torch`, `numpy`, `pandas`, etc. Dependency management!                                                                                                                                                                                   | Ollie / Emil 🧑‍💻 | ☐           |
| 3.3  | **FastAPI Basics (`main.py`)** ✨            | Basic app setup. Define `/ping` ✅, `/version` 🏷️. Set `model_version` variable.                                                                                                                                                                                                            | James / Yurii 🧑‍💻 | ☐           |
| 3.4  | **Logging Implementation (`main.py`)** ✍️    | Implement `log_request` (write JSON/str to `log_path`), `read_logs`. Use `/var/log/app`. Implement `/logs` endpoint. Persist logs! 💾                                                                                                                                                        | Emil / Ollie 🧑‍💻 | ☐           |
| 3.5  | **Prediction Logic (`main.py`)** 🔮         | Helper functions: <br> 1. Load embeddings & vocab 🧠. <br> 2. Load regression model `state_dict` ⚙️. <br> 3. Implement `predict_upvotes`: tokenize, avg embeddings, feed to model, return prediction (+ `np.expm1`?).                                                                         | James / Yurii 🧑‍💻 | ☐           |
| 3.6  | **`/how_many_upvotes` Endpoint (`main.py`)** 📮 | Implement POST endpoint: parse input, call `predict_upvotes`, calc latency ⏱️, format log msg 📝, call `log_request`, return prediction JSON.                                                                                                                                           | Ollie / Emil 🧑‍💻 | ☐           |
| 3.7  | **`Dockerfile`** 🐳                       | Create/Adapt Dockerfile: `python:3.11`, `WORKDIR`, `COPY` requirements/app/models, `RUN pip install`, `EXPOSE 8000`, `CMD`. 📦                                                                                                                                                               | James / Yurii 🧑‍💻 | ☐           |
| 3.8  | **Local Testing (uvicorn)** 🧪              | Run `uvicorn app.main:app --reload`. Test endpoints (`curl`, `/docs`). Check predictions work. 🐞🔫                                                                                                                                                                                        | Team (All) 🤝    | ☐           |
| 3.9  | **Docker Build & Run** 🏗️➡️🏃              | Build: `docker build -t user/repo:version .` <br> Run: `docker run --name dropout-disco -d -p 8000:8000 -v ./logs:/var/log/app user/repo:version`                                                                                                                                          | Team (All) 🤝    | ☐           |
| 3.10 | **Docker Testing & Logging** ✅🔍           | Test endpoints on container (`localhost:8000`). Verify predictions. Check host `./logs` dir for persistent logs. 👀                                                                                                                                                                            | Team (All) 🤝    | ☐           |